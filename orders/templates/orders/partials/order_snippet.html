{% load orders_extras %}

<div class="card border-primary bg-ticket my-2">
    <div class="card-header">
        <div class="row ">
            <span class="col-auto">
                <span class="col-auto me-auto badge bg-light text-dark">{{ order.date_created }}</span>
                <span class="col-auto badge bg-info text-dark">{{ order|status }}</span>
            </span>
            <span class="col-auto ms-auto ">
                <span class="col-auto">
                     {% if order.status != "DELETED" %}
                    <div>
                        <a class="btn-orders" href="{% url 'orders:edit-order' order.id %}">
                            <i class="fa-solid fa-pen"></i>
                        </a>
                    </div>
                    {% else %}

                    <form action="{% url 'orders:restore-order' pk=order.id %}" method="post">
                        {% csrf_token %}
                        <button class="btn-orders" type="submit" name="restore">
                            <i class="fa-solid fa-trash-arrow-up"></i>
                        </button>
                    </form>
                    {% endif %}
                </span>
            </span>
        </div>
        <div>{{ order|quantity }} units of {{ order.description }}</div>

    </div>
    <div class="card-body">
        <ul class="list-group list-group-flush">
            <li class="list-group-item px-0">
                <div>{{ order|vendor }} - {{ order|product_number }}</div>
                <div>${{ order|book_price }} => ${{ order|total_price }} ({{ order|paid }})</div>
                <div class="collapse collapse-{{order.id}}">
                    <div>Bottle Deposit: {{ order.has_bottle_deposit }}</div>
                    <div>Number of Bottles: {{ order.number_bottle_deposit }}</div>
                </div>
            </li>
            <li class="list-group-item px-0">
                <div>{{ order|customer_name }}, {{ order|customer_status }}</div>
                <div>{{ order|customer_company }}</div>
                <div>{{ order|customer_phone_number }}</div>
            </li>

        </ul>
        <div class="collapse collapse-{{order.id}}">
            <ul class="list-group list-group-flush">
                <li class="list-group-item p-0"></li>
                <li class="list-group-item px-0 ">
                    <div>Ordered: {{ order.date_ordered|date }}</div>
                    <div>Received: {{ order.date_received|date }}</div>
                    <div>Called: {{ order.date_called|date }}</div>
                    <div>Picked-up: {{ order.date_picked_up|date }}</div>
                </li>
                <li class="list-group-item px-0 ">
                    <div>Employee initials: {{ order.employee_initials }}</div>
                    <div>Memo: {{ order.memo }}</div>
                </li>
            </ul>
        </div>
        <button class="btn btn-sm btn-light btn-order-more-info" type="button" data-bs-toggle="collapse"
                data-bs-target=".collapse-{{order.id}}"
                aria-expanded="false" aria-controls="collapseExample" onclick="this.blur();">
            More Info
        </button>
    </div>

</div>


<!--has_bottle_deposit = models.BooleanField(null=True, blank=True)-->
<!--number_bottle_deposit = models.PositiveSmallIntegerField(-->
<!--validators=[MinValueValidator(1)], blank=True, null=True-->
<!--)-->

<!--customer = models.ForeignKey(-->
<!--Customer, on_delete=models.PROTECT, blank=True, null=True-->
<!--)-->

<!--status = models.CharField(choices=ORDER_STATUS, max_length=64, null=True)-->
<!--is_stand_by = models.BooleanField(default=False)-->
<!--memo = models.TextField(max_length=500, null=True, blank=True)-->
<!--employee_initials = models.CharField(max_length=5)-->
